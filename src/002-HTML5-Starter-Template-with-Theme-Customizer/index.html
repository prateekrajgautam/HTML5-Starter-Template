<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Template Tester</title>
    <link rel="stylesheet" href="./assets/styles/sitestyle.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <style>
        .material-symbols-rounded {
            font-variation-settings:
                'FILL' 0,
                'wght' 400,
                'GRAD' 0,
                'opsz' 48
        }
    </style>
</head>

<body>
    <div id="app">
        <div id="slidebar"></div>
        <div id="maincontent">
            <div id="header"></div>
            <div id="content"></div>
            <div id="footer"></div>
        </div>

    </div>

    <script>
        // function resetFunction() {
        //     localStorage.clear()
        //     sessionStorage.clear()
        // }
        // document.getElementById("slidebar").innerHTML = customizer
        async function getHTML(name, target = null, type = 'innerHTML', storage = sessionStorage) {
            var response = ""
            if (storage.getItem(name) != null) {
                response = storage.getItem(name)
                if (target != null) {
                    // alert(target)
                    // alert(response)
                    // alert(type)
                    if (type == "innerHTML") {
                        document.getElementById(target).innerHTML = response
                    }
                    if (type == "outerHTML") {
                        document.getElementById(target).outerHTML = response
                    }
                    if (type == "append") document.getElementById(target).innerHTML += response
                }
            }
            if (storage.getItem(name) == null) {
                let xhr = new XMLHttpRequest();
                URL = `./${name}.html`
                method = "GET"
                xhr.open(method, URL)
                await xhr.send()
                xhr.onload = async function () {
                    // alert(`${xhr.onerror}Loaded: ${xhr.status} ${xhr.response} `);
                    if (xhr.status >= 200) {
                        response = xhr.response
                        // save to local stoage
                        storage.setItem(name, response)
                        await xhr.DONE
                        if (target != null) {
                            // alert(target)
                            // alert(response)
                            // alert(type)
                            if (type == "innerHTML") {
                                document.getElementById(target).innerHTML = response
                            }
                            if (type == "outerHTML") {
                                document.getElementById(target).outerHTML = response
                            }
                            if (type == "append") document.getElementById(target).innerHTML += response
                        }
                    }
                }

            }


            return response
        }
        // document.getElementById("content").innerHTML = getHTML('appmaindemo')
        getHTML('includes/customizer', 'slidebar', "outerHTML")
        getHTML('includes/footer', 'footer', 'outerHTML')
        getHTML('includes/header', 'header', 'outerHTML')
        getHTML('appmaindemo', 'content', 'outerHTML')

    </script>
    <script src="./assets/js/sitescript.js"></script>
    <script src="./assets/js/colorconfig.js"></script>
    <script type="text/javascript" src="https://generatorjs.mgeek.in/cdn/generator.js" async defer> </script>
    <script>
        // function loadDoc() {
        //     var xhttp = new XMLHttpRequest();
        //     xhttp.onreadystatechange = function () {
        //         if (this.readyState == 4 && this.status == 200) {
        //             myFunction(this);
        //         }
        //     };
        //     xhttp.open("post", "./pages", true);
        //     xhttp.send();
        //     alert(`${xhttp.status} ${xhttp.response}`)
        // }
        // loadDoc()
    </script>

</body>

<!-- <script src="/assets/js/htmx.min.js.gz"></script> -->


</html>